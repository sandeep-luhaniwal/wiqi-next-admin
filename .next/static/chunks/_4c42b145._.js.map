{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/kodu/nextjs/app/%28protected%29/components/category/category-context.js"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { createContext, useContext, useState } from \"react\";\r\n\r\nconst CategoryContext = createContext();\r\n\r\nexport const CategoryProvider = ({ children }) => {\r\n    const [categories, setCategories] = useState([]);\r\n    const [categoryToEdit, setCategoryToEdit] = useState(null);\r\n    const [refreshFlag, setRefreshFlag] = useState(false);\r\n\r\n    const triggerRefresh = () => setRefreshFlag(prev => !prev);\r\n\r\n    return (\r\n        <CategoryContext.Provider\r\n            value={{\r\n                categories,\r\n                setCategories,\r\n                categoryToEdit,\r\n                setCategoryToEdit,\r\n                refreshFlag,\r\n                triggerRefresh,\r\n            }}\r\n        >\r\n            {children}\r\n        </CategoryContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useCategory = () => useContext(CategoryContext);\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIA,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD;AAE7B,MAAM,mBAAmB,CAAC,EAAE,QAAQ,EAAE;;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,iBAAiB,IAAM,eAAe,CAAA,OAAQ,CAAC;IAErD,qBACI,6LAAC,gBAAgB,QAAQ;QACrB,OAAO;YACH;YACA;YACA;YACA;YACA;YACA;QACJ;kBAEC;;;;;;AAGb;GArBa;KAAA;AAuBN,MAAM,cAAc;;IAAM,OAAA,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;AAAe;IAA9C","debugId":null}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///D:/kodu/nextjs/app/%28protected%29/components/category/AllTypeCategory.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { useReactTable, getCoreRowModel, getFilteredRowModel, getPaginationRowModel, getSortedRowModel } from \"@tanstack/react-table\";\r\nimport { Pencil, Trash2, Search, X, Link2 } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardHeader, CardTitle, CardToolbar, CardTable, CardFooter } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { ScrollArea, ScrollBar } from \"@/components/ui/scroll-area\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\nimport { useCategory } from \"./category-context\";\r\n\r\nexport default function AllTypeCategory() {\r\n    const { categories, setCategories, setCategoryToEdit, refreshFlag } = useCategory();\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [pagination, setPagination] = useState({ pageIndex: 0, pageSize: 10 });\r\n    const [sorting, setSorting] = useState([]);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        const fetchCategories = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const token = localStorage.getItem(\"token\");\r\n                if (!token) throw new Error(\"Token not found\");\r\n\r\n                const res = await fetch(\"https://wiqiapi.testenvapp.com/api/admin/getCategory\", {\r\n                    headers: { Authorization: `Bearer ${token}` },\r\n                });\r\n                const data = await res.json();\r\n                if (!res.ok || !data.success) throw new Error(data.message || \"Failed to fetch\");\r\n                setCategories(data.data.data || []);\r\n            } catch (err) {\r\n                setError(err.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchCategories();\r\n    }, [refreshFlag]);\r\n\r\n    const filteredData = useMemo(() => {\r\n        if (!searchQuery) return categories;\r\n        return categories.filter(cat =>\r\n            cat.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            cat.title?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            cat.type?.toLowerCase().includes(searchQuery.toLowerCase())\r\n        );\r\n    }, [searchQuery, categories]);\r\n\r\n    const columns = useMemo(() => [\r\n        {\r\n            id: \"image\",\r\n            accessorFn: (row) => row.image,\r\n            header: () => <span className=\"font-bold\">Image</span>,\r\n            cell: ({ row }) => row.original.image ? <img src={row.original.image} alt={row.original.name} className=\"w-12 h-12 rounded object-cover border\" /> : <span className=\"text-gray-400 text-sm\">No Image</span>,\r\n            size: 100,\r\n        },\r\n        {\r\n            id: \"name\",\r\n            accessorFn: (row) => row.name,\r\n            header: () => <span className=\"font-bold\">Name</span>,\r\n            cell: ({ row }) => <span className=\"font-bold truncate block max-w-[200px]\" title={row.original.name}>{row.original.name}</span>,\r\n            size: 150,\r\n        },\r\n        {\r\n            id: \"title\",\r\n            accessorFn: (row) => row.title,\r\n            header: () => <span className=\"font-bold\">Title</span>,\r\n            cell: ({ row }) => (\r\n                <TooltipProvider>\r\n                    <Tooltip>\r\n                        <TooltipTrigger asChild>\r\n                            <span className=\"truncate block max-w-[350px] cursor-help\">{row.original.title}</span>\r\n                        </TooltipTrigger>\r\n                        <TooltipContent side=\"top\" className=\"max-w-xs\">{row.original.title}</TooltipContent>\r\n                    </Tooltip>\r\n                </TooltipProvider>\r\n            ),\r\n            size: 350,\r\n        },\r\n        {\r\n            id: \"type\",\r\n            accessorFn: (row) => row.type,\r\n            header: () => <span className=\"font-bold\">Type</span>,\r\n            cell: ({ row }) => <span className=\"capitalize truncate block max-w-[150px]\" title={row.original.type}>{row.original.type}</span>,\r\n            size: 100,\r\n        },\r\n        {\r\n            id: \"actions\",\r\n            header: () => <span className=\"font-bold block text-right\">Actions</span>,\r\n            cell: ({ row }) => (\r\n                <div className=\"flex justify-end gap-3 items-center\">\r\n                    {row.original.url && <a href={row.original.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:text-blue-800 flex items-center gap-1 text-sm\"><Link2 size={16} /> Visit</a>}\r\n                    <TooltipProvider>\r\n                        <Tooltip>\r\n                            <TooltipTrigger asChild>\r\n                                <button onClick={() => setCategoryToEdit(row.original)} className=\"text-blue-600 cursor-pointer hover:text-blue-800\"><Pencil size={18} /></button>\r\n                            </TooltipTrigger>\r\n                            <TooltipContent>Edit</TooltipContent>\r\n                        </Tooltip>\r\n                    </TooltipProvider>\r\n                    <TooltipProvider>\r\n                        <Tooltip>\r\n                            <TooltipTrigger asChild>\r\n                                <button className=\"text-red-600 cursor-pointer hover:text-red-800\"><Trash2 size={18} /></button>\r\n                            </TooltipTrigger>\r\n                            <TooltipContent>Delete</TooltipContent>\r\n                        </Tooltip>\r\n                    </TooltipProvider>\r\n                </div>\r\n            ),\r\n            size: 100,\r\n        }\r\n    ], [setCategoryToEdit]);\r\n\r\n    const table = useReactTable({\r\n        columns,\r\n        data: filteredData,\r\n        pageCount: Math.ceil(filteredData?.length / pagination.pageSize),\r\n        getRowId: (row) => String(row._id),\r\n        state: { pagination, sorting },\r\n        onPaginationChange: setPagination,\r\n        onSortingChange: setSorting,\r\n        getCoreRowModel: getCoreRowModel(),\r\n        getFilteredRowModel: getFilteredRowModel(),\r\n        getPaginationRowModel: getPaginationRowModel(),\r\n        getSortedRowModel: getSortedRowModel(),\r\n        columnResizeMode: \"onChange\",\r\n    });\r\n\r\n    if (loading) return <div className=\"flex justify-center items-center min-h-[200px]\">Loading categories...</div>;\r\n    if (error) return <div className=\"p-4 bg-red-100 text-red-700 rounded\">{error}</div>;\r\n\r\n    return (\r\n        <DataGrid table={table} recordCount={filteredData?.length || 0}>\r\n            <Card>\r\n                <CardHeader className=\"py-3.5\">\r\n                    <CardTitle>Categories</CardTitle>\r\n                    <CardToolbar className=\"relative\">\r\n                        <Search className=\"absolute start-3 top-1/2 -translate-y-1/2\" />\r\n                        <Input\r\n                            placeholder=\"Search categories...\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                            className=\"ps-9 max-w-[200px] w-full\"\r\n                        />\r\n                        {searchQuery && <Button variant=\"ghost\" className=\"absolute end-1.5 top-1/2 -translate-y-1/2 h-6 w-6\" onClick={() => setSearchQuery(\"\")}><X /></Button>}\r\n                    </CardToolbar>\r\n                </CardHeader>\r\n                <CardTable>\r\n                    <ScrollArea>\r\n                        <DataGridTable />\r\n                        <ScrollBar orientation=\"horizontal\" />\r\n                    </ScrollArea>\r\n                </CardTable>\r\n                <CardFooter>\r\n                    <DataGridPagination />\r\n                </CardFooter>\r\n            </Card>\r\n        </DataGrid>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 587, "column": 0}, "map": {"version":3,"sources":["file:///D:/kodu/nextjs/components/ui/label.jsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { cva } from 'class-variance-authority';\nimport { Label as LabelPrimitive } from 'radix-ui';\nimport { cn } from '@/lib/utils';\n\nconst labelVariants = cva(\n  'text-sm leading-none text-foreground peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        primary: 'font-medium',\n        secondary: 'font-normal',\n      },\n    },\n    defaultVariants: {\n      variant: 'primary',\n    },\n  },\n);\n\nfunction Label({ className, variant, ...props }) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(labelVariants({ variant }), className)}\n      {...props}\n    />\n  );\n}\n\nexport { Label };\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB,kGACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO;IAC7C,qBACE,6LAAC,qMAAA,CAAA,QAAc,CAAC,IAAI;QAClB,aAAU;QACV,WAAW,CAAA,GAAA,+GAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KARS","debugId":null}},
    {"offset": {"line": 638, "column": 0}, "map": {"version":3,"sources":["file:///D:/kodu/nextjs/app/%28protected%29/components/category/CreateCategory.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport toast, { Toaster } from \"react-hot-toast\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardHeader,\r\n    CardTitle,\r\n    CardFooter,\r\n} from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Select,\r\n    SelectTrigger,\r\n    SelectValue,\r\n    SelectContent,\r\n    SelectItem,\r\n} from \"@/components/ui/select\";\r\nimport { Pencil, Trash2, Upload } from \"lucide-react\";\r\nimport { useCategory } from \"./category-context\";\r\n\r\nexport default function CreateCategory() {\r\n    const { categoryToEdit, setCategoryToEdit, triggerRefresh } = useCategory();\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [title, setTitle] = useState(\"\");\r\n    const [url, setUrl] = useState(\"\");\r\n    const [type, setType] = useState(\"\");\r\n    const [imageFile, setImageFile] = useState(null);\r\n    const [preview, setPreview] = useState(null);\r\n\r\n    const [errors, setErrors] = useState({});\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // Fill form when editing\r\n    useEffect(() => {\r\n        if (categoryToEdit) {\r\n            setName(categoryToEdit.name || \"\");\r\n            setTitle(categoryToEdit.title || \"\");\r\n            setUrl(categoryToEdit.url || \"\");\r\n            setType(categoryToEdit.type || \"\");\r\n            setPreview(categoryToEdit.image || null);\r\n            setImageFile(null);\r\n        }\r\n    }, [categoryToEdit]);\r\n\r\n    const validate = () => {\r\n        const newErrors = {};\r\n        if (!name.trim()) newErrors.name = \"Name is required\";\r\n        if (!title.trim()) newErrors.title = \"Title is required\";\r\n        if (!type.trim()) newErrors.type = \"Type is required\";\r\n        if (!imageFile && !preview) newErrors.image = \"Image is required\";\r\n        return newErrors;\r\n    };\r\n\r\n    const handleImageChange = (file) => {\r\n        if (file) {\r\n            setImageFile(file);\r\n            setPreview(URL.createObjectURL(file));\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        setErrors({});\r\n        const validationErrors = validate();\r\n        if (Object.keys(validationErrors).length > 0) {\r\n            setErrors(validationErrors);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            if (!token) throw new Error(\"Token not found\");\r\n\r\n            const formData = new FormData();\r\n            formData.append(\"name\", name);\r\n            formData.append(\"title\", title);\r\n            formData.append(\"url\", url.trim() === \"\" ? \"\" : url);\r\n            formData.append(\"type\", type);\r\n            if (imageFile) formData.append(\"image\", imageFile);\r\n\r\n            let urlEndpoint = \"https://wiqiapi.testenvapp.com/api/admin/createCategory\";\r\n            let method = \"POST\";\r\n\r\n            if (categoryToEdit?._id) {\r\n                urlEndpoint = `https://wiqiapi.testenvapp.com/api/admin/updateCategory/${categoryToEdit._id}`;\r\n                method = \"PUT\";\r\n            }\r\n\r\n            const res = await fetch(urlEndpoint, {\r\n                method,\r\n                headers: { Authorization: `Bearer ${token}` },\r\n                body: formData,\r\n            });\r\n\r\n            const data = await res.json();\r\n            if (!res.ok || !data.success)\r\n                throw new Error(data.message || \"Failed to save category\");\r\n\r\n            toast.success(categoryToEdit ? \"Category updated!\" : \"Category created!\");\r\n\r\n            // Reset form\r\n            setName(\"\");\r\n            setTitle(\"\");\r\n            setUrl(\"\");\r\n            setType(\"\");\r\n            setImageFile(null);\r\n            setPreview(null);\r\n            setCategoryToEdit(null);\r\n\r\n            triggerRefresh();\r\n        } catch (err) {\r\n            toast.error(err.message || \"Something went wrong\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className=\"w-full\">\r\n            <CardHeader>\r\n                <CardTitle className=\"text-xl font-bold text-primary\">\r\n                    {categoryToEdit ? \"Edit Category\" : \"Create New Category\"}\r\n                </CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-5\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-5\">\r\n                    <div>\r\n                        <Label htmlFor=\"name\">Name</Label>\r\n                        <Input\r\n                            id=\"name\"\r\n                            placeholder=\"Enter Name\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                        />\r\n                        {errors.name && <p className=\"text-sm text-red-600\">{errors.name}</p>}\r\n                    </div>\r\n                    <div>\r\n                        <Label htmlFor=\"title\">Title</Label>\r\n                        <Input\r\n                            id=\"title\"\r\n                            placeholder=\"Enter Title\"\r\n                            value={title}\r\n                            onChange={(e) => setTitle(e.target.value)}\r\n                        />\r\n                        {errors.title && <p className=\"text-sm text-red-600\">{errors.title}</p>}\r\n                    </div>\r\n                    <div>\r\n                        <Label htmlFor=\"url\">URL (optional)</Label>\r\n                        <Input id=\"url\" placeholder=\"Enter URL\" value={url} onChange={(e) => setUrl(e.target.value)} />\r\n                    </div>\r\n                    <div>\r\n                        <Label htmlFor=\"type\">Type</Label>\r\n                        <Select value={type} onValueChange={(v) => setType(v)}>\r\n                            <SelectTrigger id=\"type\" className=\"w-full cursor-pointer\">\r\n                                <SelectValue placeholder=\"Select Type\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"Wiqi Plus\">Wiqi Plus</SelectItem>\r\n                                <SelectItem value=\"Tv\">Tv</SelectItem>\r\n                                <SelectItem value=\"Radio\">Radio</SelectItem>\r\n                                <SelectItem value=\"Shops\">Shops</SelectItem>\r\n                                <SelectItem value=\"Reads\">Reads</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n                        {errors.type && <p className=\"text-sm text-red-600\">{errors.type}</p>}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col gap-2\">\r\n                    <Label>Image</Label>\r\n                    {preview ? (\r\n                        <div className=\"relative w-32 h-32\">\r\n                            <img src={preview} alt=\"Preview\" className=\"w-32 h-32 rounded object-cover border\" />\r\n                            <div className=\"absolute inset-0 flex items-center justify-center gap-2 bg-black/40 rounded opacity-0 hover:opacity-100 transition\">\r\n                                <label className=\"cursor-pointer bg-white p-2 rounded-full shadow hover:bg-gray-100\">\r\n                                    <Pencil className=\"w-4 h-4 text-blue-600\" />\r\n                                    <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={(e) => handleImageChange(e.target.files[0])} />\r\n                                </label>\r\n                                <button type=\"button\" onClick={() => { setImageFile(null); setPreview(null); }} className=\"bg-white p-2 rounded-full shadow hover:bg-gray-100\">\r\n                                    <Trash2 className=\"w-4 h-4 text-red-600\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <label className=\"flex items-center justify-center border border-dashed border-gray-400 rounded-lg p-6 cursor-pointer hover:bg-gray-50\">\r\n                            <Upload className=\"w-5 h-5 mr-2 text-gray-500\" />\r\n                            <span className=\"text-gray-600\">Choose Image</span>\r\n                            <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={(e) => handleImageChange(e.target.files[0])} />\r\n                        </label>\r\n                    )}\r\n                    {errors.image && <p className=\"text-sm text-red-600\">{errors.image}</p>}\r\n                </div>\r\n            </CardContent>\r\n            <CardFooter className=\"flex justify-end\">\r\n                <Button onClick={handleSubmit} disabled={loading}>\r\n                    {loading ? \"Saving...\" : categoryToEdit ? \"Update\" : \"Create\"}\r\n                </Button>\r\n                <Toaster position=\"top-right\" />\r\n            </CardFooter>\r\n        </Card>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}